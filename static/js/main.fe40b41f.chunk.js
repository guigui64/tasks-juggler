(window["webpackJsonptasks-juggler"]=window["webpackJsonptasks-juggler"]||[]).push([[0],{50:function(e,t,a){e.exports=a(77)},55:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),c=a.n(r),i=a(90),l=a(8),s=a(15),d=a(27),u=a(19),m=(a(55),a(28)),p=a(81),f=function(e){var t=e.deletionTargetName,a=Object(m.a)(e,["deletionTargetName"]);return o.a.createElement(p.a,Object.assign({cancelButtonText:"Cancel",icon:"trash",intent:u.a.DANGER,canEscapeKeyCancel:!0,canOutsideClickCancel:!0},a),o.a.createElement("p",null,"Are you sure you want to delete ".concat(t," ?")))},O=a(39),E=a(14),g=a(40),j=a(20),h=function(e){var t=e.add,a=Object(m.a)(e,["add"]);return o.a.createElement(O.a,Object.assign({icon:"info-sign",title:"Palantir Foundry"},a),o.a.createElement("div",{className:E.a.DIALOG_BODY},o.a.createElement("p",null,"TODO add project form")),o.a.createElement("div",{className:E.a.DIALOG_FOOTER},o.a.createElement("div",{className:E.a.DIALOG_FOOTER_ACTIONS},o.a.createElement(g.a,{content:"This button is hooked up to close the dialog."},o.a.createElement(j.b,{onClick:a.onClose},"Close")),o.a.createElement(j.b,{text:"Add",onClick:function(){t(),a.onClose()}}))))},b=a(46),v=a(22),k=a(89),I=a(25),y=a(88),D=a(87),T=E.a.DARK,C=-2,A=function(e){var t=e.openAddProjDialog,a=e.selectedProject,n=e.openDeleteProjAlert,r=e.dumpDataBase,c=e.loadDataBase;return o.a.createElement(D.a,null,o.a.createElement(D.a.Divider,{title:"Projects"}),o.a.createElement(D.a.Item,{text:"Add project",icon:"add",onClick:function(){return t(!0)}}),o.a.createElement(D.a.Item,{text:"Edit project",icon:"edit",disabled:a===C,onClick:function(){return console.log("TODO edit project")}}),o.a.createElement(D.a.Item,{text:"Delete project",icon:"trash",intent:"danger",disabled:a===C,onClick:function(){return n(!0)}}),o.a.createElement(D.a.Divider,{title:"Database"}),o.a.createElement(D.a.Item,{text:"Dump database",icon:"floppy-disk",onClick:r}),o.a.createElement(D.a.Item,{text:"Load database",icon:"database",onClick:c}))},S=a(82),x=a(83),B=function(e){var t=e.theme,a=e.setTheme,n=e.showOrphan,r=e.setShowOrphan;return o.a.createElement(S.a,{style:{padding:"10px",margin:"0"}},o.a.createElement(x.a,{alignIndicator:v.a.RIGHT,checked:t===T,onChange:function(){var e=""===t?T:"";a(e),localStorage.setItem("tasks-juggler-theme",e)}},(""===t?"Dark":"Light")+" theme"),o.a.createElement(x.a,{alignIndicator:v.a.RIGHT,checked:n,onChange:function(){var e=!n;r(e),localStorage.setItem("tasks-juggler-show-orphan",String(e))}},"".concat(n?"Hide":"Show"," orphan tasks")))},w=function(e){var t=e.theme,a=e.setTheme,n=e.dumpDataBase,r=e.loadDataBase,c=e.setSelectedProject,i=e.dataBase,s=e.selectedProject,d=e.openDeleteProjAlert,u=e.openAddProjDialog,m=e.showOrphan,p=e.setShowOrphan,f=[{name:"All",id:C,desc:"All the projects"}].concat(Object(b.a)(i.projects));return o.a.createElement(y.a,null,o.a.createElement(y.a.Group,{align:v.a.LEFT},o.a.createElement(y.a.Heading,{style:{fontWeight:"bold"}},"Tasks Juggler".toUpperCase())),o.a.createElement(y.a.Group,{align:v.a.RIGHT},o.a.createElement(k.a,{large:!0,onChange:function(e){c(e)},selectedTabId:s},f.map(function(e){return o.a.createElement(k.a.Tab,{title:o.a.createElement(g.a,{content:e.desc,position:l.a.BOTTOM},e.name.toUpperCase()),id:e.id,key:e.id})})),o.a.createElement(y.a.Divider,null),o.a.createElement(I.a,{content:o.a.createElement(A,{openAddProjDialog:u,selectedProject:s,openDeleteProjAlert:d,dumpDataBase:n,loadDataBase:r}),position:l.a.BOTTOM},o.a.createElement(j.b,{minimal:!0,icon:"build",text:"Actions"})),o.a.createElement(I.a,{content:o.a.createElement(B,{theme:t,setTheme:a,showOrphan:m,setShowOrphan:p}),position:l.a.BOTTOM},o.a.createElement(j.b,{minimal:!0,icon:"cog",text:"Settings"}))))},N=a(84),P=a(17),R=function(e){var t=e.title,a=e.desc,n=e.duration;return o.a.createElement(N.a,{interactive:!0,elevation:P.a.TWO,className:"animated fadeIn fast"},o.a.createElement("h3",null,t),o.a.createElement("p",null,a),n&&o.a.createElement("p",null,"".concat(n," day(s)")))},L=a(45),G=function(e){var t=e.title,a=e.tasks,n=e.selectedProject;return o.a.createElement("div",{style:{padding:"50px 50px 0 50px"}},o.a.createElement("div",{style:{display:"inline"}},o.a.createElement(d.a,{style:{display:"inline-block",marginRight:"10px"}},t),o.a.createElement(L.a,null,o.a.createElement(j.b,{text:"Add task",icon:"add",onClick:function(){return console.log("TODO add task")}}),o.a.createElement(j.b,{text:"Delete tasks",icon:"trash",onClick:function(){return console.log("TODO delete tasks")}}))),o.a.createElement("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gridGap:"10px"}},a.filter(function(e){return e.projectId===n||n===C&&-1!==e.projectId}).map(function(e){var t=e.title,a=e.desc,n=e.duration,r=e.id;return o.a.createElement(R,Object.assign({title:t,desc:a,duration:n},{key:r}))})))},_=a(85),F=a(86),J=a(70),M=new FileReader,H=function(e){var t=e.isOpen,a=e.onClose,n=e.dump,r=e.onClipboard;return o.a.createElement(O.a,{icon:"database",title:"DataBase dump",isOpen:t,onClose:a},o.a.createElement("div",{className:E.a.DIALOG_BODY},o.a.createElement("p",null,"Copy to clipboard or save it to your files :"),o.a.createElement(_.a,{id:"dump",readOnly:!0,style:{width:"100%",minHeight:"300px"},defaultValue:n})),o.a.createElement("div",{className:E.a.DIALOG_FOOTER},o.a.createElement("div",{className:E.a.DIALOG_FOOTER_ACTIONS},o.a.createElement(j.b,{text:"Copy to clipboard",icon:"clipboard",intent:u.a.PRIMARY,onClick:function(){document.getElementById("dump").select(),document.execCommand("copy"),r()}}),o.a.createElement(j.b,{text:"Download as JSON",icon:"download",intent:u.a.PRIMARY,onClick:function(){var e=new Blob([n],{type:"text/plain;charset=utf-8"});J.saveAs(e,"tasks-juggler-db.json")}}))))},Y=function(e){var t=e.isOpen,a=e.onClose,r=e.onLoad,c=Object(n.useState)(""),i=Object(s.a)(c,2),l=i[0],d=i[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),f=p[0],g=p[1],h=function(e){r(e)&&a()};return o.a.createElement(O.a,{icon:"database",title:"DataBase dump",isOpen:t,onClose:a},o.a.createElement("div",{className:E.a.DIALOG_BODY},o.a.createElement("p",null,"Copy your database in the following area and click on 'Load' :"),o.a.createElement(_.a,{autoFocus:!0,id:"dump",style:{width:"100%",minHeight:"100px",marginBottom:"10px"},value:l,onChange:function(e){return d(e.target.value)}}),o.a.createElement("div",{className:E.a.DIALOG_FOOTER_ACTIONS},o.a.createElement(j.b,{text:"Load",disabled:0===l.length,icon:"upload",intent:u.a.PRIMARY,onClick:function(){return h(l)}}))),o.a.createElement("div",{className:E.a.DIALOG_FOOTER},o.a.createElement("p",null,"OR load from your files :"),o.a.createElement("div",{className:E.a.DIALOG_FOOTER_ACTIONS},o.a.createElement(F.a,{text:f||"Choose JSON file",buttonText:"Browse",inputProps:{id:"file-input",accept:".json",multiple:!1,onChange:function(e){return g(e.currentTarget.value)}}}),o.a.createElement(j.b,{text:"Load from a file",icon:"folder-open",intent:u.a.PRIMARY,disabled:""===f,onClick:function(){var e=document.getElementById("file-input");M.onload=function(){h(M.result)},M.readAsText(e.files[0])}}))))},W=function(e){return e.projects.map(function(e){return e.id}).reduce(function(e,t){return Math.max(e,t)})+1},U=a(31),K=function(e){var t,a=e.toaster,r=Object(n.useState)(Boolean(localStorage.getItem("tasks-juggler-show-orphan")||!1)),i=Object(s.a)(r,2),l=i[0],m=i[1],p=Object(n.useState)(localStorage.getItem("tasks-juggler-theme")||""),O=Object(s.a)(p,2),E=O[0],g=O[1],j=Object(n.useState)(!1),b=Object(s.a)(j,2),v=b[0],k=b[1],I=Object(n.useState)(!1),y=Object(s.a)(I,2),D=y[0],T=y[1],A=Object(n.useState)(!1),S=Object(s.a)(A,2),x=S[0],B=S[1],N=Object(n.useState)(!1),P=Object(s.a)(N,2),R=P[0],L=P[1],_=localStorage.getItem("tasks-juggler-database");if(_)try{t=JSON.parse(_)}catch(te){}var F=Object(n.useState)(t||function(){var e=0,t=0;return{projects:[{name:"Toto",desc:"toto project",id:e++},{name:"Titi",desc:"titi project",id:e++}],tasks:[{title:"ZombieTask",desc:"I have no project...",id:t++,projectId:-1,duration:1},{title:"TotoTask1",desc:"task 1 of toto project",id:t++,projectId:0,duration:.5},{title:"TotoTask2",desc:"task 2 of toto project",id:t++,projectId:0,duration:1},{title:"TitiTask",desc:"task 1 of titi project",id:t++,projectId:1,duration:1}]}}()),J=Object(s.a)(F,2),M=J[0],K=J[1],V=function(e){K(e),localStorage.setItem("tasks-juggler-database",JSON.stringify(e))},Z=Object(n.useState)(C),$=Object(s.a)(Z,2),q=$[0],z=$[1],Q=function(e){M.projects=M.projects.filter(function(t){return t.id!==e}),M.tasks.forEach(function(t){return t.projectId===e&&(t.projectId=-1)}),V(M),z(C)};c.a.createPortal(a,document.getElementById("root"));var X=function(e,t){a.show({message:e,intent:t})},ee=function(e){switch(e){case U.a:return"animated fadeInDown fast";case U.b:return"animated fadeOutUp fast";default:return""}};return o.a.createElement("div",{className:E,id:"container"},o.a.createElement(w,Object.assign({dumpDataBase:function(){return B(!0)},loadDataBase:function(){return L(!0)}},{theme:E,setTheme:g,setSelectedProject:z,dataBase:M,deleteProject:Q,selectedProject:q,openDeleteProjAlert:k,openAddProjDialog:T,showOrphan:l,setShowOrphan:m})),o.a.createElement(G,{title:"Tasks",tasks:M.tasks,selectedProject:q}),o.a.createElement(U.c,{in:l,timeout:800,unmountOnExit:!0},function(e){return o.a.createElement("div",{className:ee(e)},o.a.createElement(G,{title:"Orphan tasks",tasks:M.tasks,selectedProject:-1}))}),o.a.createElement("div",{style:{padding:"50px 50px 0 50px"}},o.a.createElement("div",{style:{display:"inline"}},o.a.createElement(d.a,{style:{display:"inline-block",marginRight:"10px"}},"Planning"))),o.a.createElement(f,{confirmButtonText:"Delete project",isOpen:v,onCancel:function(){return k(!1)},onConfirm:function(){k(!1),Q(q)},deletionTargetName:q===C?"ALL => IMPOSSIBLE":M.projects.find(function(e){return e.id===q}).name}),o.a.createElement(h,{isOpen:D,onClose:function(){return T(!1)},add:function(){return function(e){var t=W(M);M.projects.push({name:e,desc:"",id:t}),V(M),z(t)}("Test"+W(M))}}),o.a.createElement(H,{isOpen:x,onClose:function(){return B(!1)},dump:JSON.stringify(M,null,"\t"),onClipboard:function(){return X("Copied to clipboard !",u.a.SUCCESS)}}),o.a.createElement(Y,{isOpen:R,onClose:function(){return L(!1)},onLoad:function(e){var t;try{t=JSON.parse(e)}catch(te){return X("Imported DB format is not correct",u.a.WARNING),!1}var a=function(e){if("object"!==typeof e||Array.isArray(e))return{valid:!1,reason:"Imported DB is not an object"};var t=[];if(!e.projects)return{valid:!1,reason:"Imported DB has no 'projects' child"};if(!Array.isArray(e.projects))return{valid:!1,reason:"Imported DB 'projects' is not an array"};if(!e.projects.every(function(e){return void 0!==e.name&&"string"===typeof e.name&&void 0!==e.desc&&"string"===typeof e.desc&&void 0!==e.id&&"number"===typeof e.id&&!t.includes(e.id)&&(t.push(e.id),!0)}))return{valid:!1,reason:"Imported DB projects are not correctly formed"};t.push(-1);var a=[];return e.tasks?Array.isArray(e.tasks)?e.tasks.every(function(e){return void 0!==e.title&&"string"===typeof e.title&&void 0!==e.desc&&"string"===typeof e.desc&&void 0!==e.id&&"number"===typeof e.id&&void 0!==e.projectId&&"number"===typeof e.projectId&&void 0!==e.duration&&"number"===typeof e.duration&&(!a.includes(e.id)&&(a.push(e.id),!!t.includes(e.projectId)))})?{valid:!0}:{valid:!1,reason:"Imported DB tasks are not correctly formed"}:{valid:!1,reason:"Imported DB 'tasks' is not an array"}:{valid:!1,reason:"Imported DB has no 'tasks' child"}}(t),n=a.valid,o=a.reason;return n?(V(t),X("DB successfully imported",u.a.SUCCESS),!0):(X(o,u.a.WARNING),!1)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(71),a(72),a(73),a(74),a(75),a(76);var V=i.a.create({position:l.a.TOP});c.a.render(o.a.createElement(K,{toaster:V}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[50,1,2]]]);
//# sourceMappingURL=main.fe40b41f.chunk.js.map